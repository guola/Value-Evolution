# 2.8 去中心的云存储

**权力自守，则无假于它。**

通过之前的讨论，我们已经逐渐明确，基于数学和密码学的信息网络，不受现有中心化系统规则的限制，但可以完全的将现有的软硬件设施使用起来，重新构建新的规则和秩序。

“密区”——CryptoDriver是我们做出的一个重要的尝试。（官网地址：cryptodriver.me）

“密区”是一个端系统，用户基于公钥建立一个文件加密系统。

我们首先将所有文件用一个端随机生成的强密钥进行对称加密，然后将文件密钥用公钥加密。

所有的加密后的文件以ESF（Encrypted Sharing File）格式存储。ESF文件是一个文件包，里面记录着算法、公钥、用公钥加密的文件密钥，加密的文件或文件的云存储地址（如果只存储在本地则不需要记录）。

解密的过程，是用私钥还原文件密钥，然后用指定算法和文件密钥恢复文件。

建立任何存储的目的都是为了持续使用和分享。

标准的基于密码学的分享逻辑是这样，将ESF文件的公钥置换为接收方的公钥，将文件密钥用接收方的公钥加密，然后附加上云存储地址，将这个结构的ESF文件发送给接收者即可。

我们提供了三种发送方式：

一种是基于区块链的共享，发送时将文件云存储地址，文件密钥以接收方的公钥加密发布在区块链上，接收方通过检索，找到自己需要接收的文件，下载后用文件密钥解密。

一种是基于目前的社交网络，例如微信，可以通过一个代理服务，该服务将文件密钥用临时密码加密，将链接发给对方，接收者用自己的公钥访问链接，代理服务将临时密码改为对方公钥，将新的ESF文件发给对方，同时原链接作废。此过程，如果有恶意截取，则发送方可以通过区块链来查询。

一种是基于“秘邮”，直接用秘邮账号的公钥进行加密传输。

这样的系统，可以用于广泛的文件交换，也可以在一个企业或一个域内进行。也就是说，个人可以把这个端，变成自己的数据资产管理器，也可以变成一个私密的共享系统，同时企业可以把现有的云存储，变成高安全可靠的数据资产管理系统。

基于以上讨论，我们构建了去中心云存储的基本范式：

1\. 任何云存储，都基于两个目的，存储和分享。

2\. 具体文件的尺度是不确定的，如果每个文件的存储和分享，都基于非对称加密，一方面加大了存储的总体成本，一方面分享时消耗了过多的算力。为实现存储资源的优化，以及传输时的便利。文件应该是对称加密的，通过端到端加密传输文件密钥，从文件的端到端加密处理，转换为文件密钥的加密处理，两者之间是共识对等的，效果是一致的。

3\. 利用对文件密钥的加密管理体系，还可以优化用户的资源，并在用户公私钥失效时，建立一个便捷的转化能力。

4\. 该系统依赖于端系统的保障，符合去中心的原则，任何云存储系统都无法利用超级管理员权限，破坏数据的权力关系。这样也就意味着，任何现有的云存储服务，都可以利用端技术实现去中心的云存储服务。

5\. 文件分享和交换，可以依据现有网络，也可以依据端支持的加密通讯，更可以依赖于分布式账本。

6\. 如果分享是依赖分布式账本的，反过来，就可以认为，利用分布式账本，可以完成数据权的转移和分享，也就支持了数据产权的交易。

如果文件本身可以声明其哈希证明的源，则可以广泛支持基于区块链哈希证明的证书业务体系，以及区块链驱动的跨链数据交易。

这个文件协议系统，我定义了其中的一个标准——哈希证明文件协议HPFP(Hash Proof File Protocol)，通过声明该文件哈希证明链的服务指向，在交换文件的时候，端可以自适应的根据指向服务验证数据的合法性。

去中心存储是密码学信息系统的重要组成部分，只要是基于密码学共识的体系，大家都可以在这个领域持续创新，让数据变得可以管理并具备价值转换能力。

其实，我们自己就是用去中心云存储思路，实现用户的公私钥数据管理，公私钥被封装在一个叫“密照”的结构文件中，利用用户在头脑中记忆的口令，才能恢复这个文件。由于不存在分享给任何第三方这个应用场景，公私钥又是封装在文件里的，不能用非对称加密保护，因此，就用口令进行保护。

去中心的存储系统的整体画面，很像是数据细胞结成的数据器官构成的数据生物，寄生在现有的云存储系统中，也像是种子播撒在土地中，通过把原来的数据，权力化异构，随着物种的繁荣，滋生出一个新的数据生态，进而进化出森林。
