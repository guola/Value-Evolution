# 2.9 去中心通讯网络

**用九，见群龙无首，吉。——《易·乾》**

在密空中，通讯网络依然的核心的系统。有了数据细胞技术，就可以建设规则简明的去中心通讯网络，这个通讯网络和现有的通讯网络有些不同的特性。

端到端模型（End to End）

底层结构完全建构在数学和密码学基础上，是算法依赖的。也就是每个通讯节点，应该首先要支持公私钥的验证体系。由非交互零知识证明这种方法作为基础支撑，也是定义端到端的基础属性。

用于验签的不同的非对称算法，构成最大的通讯域，也就是一个数据种群，不同数据种群之间是无法直接交换数据的。

寻址方式

作为通讯的第二个关键支撑，是寻址服务，任何通讯系统必然依赖特定的寻址方式，才能实现通讯。这也是通讯服务最显著的特征。现有的网络通讯分为P2P和名称服务（Name Server）两个大的体系。由于基础网络绝大多数是建立在TCP/IP基础上的，IP地址和端口构成了基础的信标（Beacon）。P2P是分布式去中心管理的。Name Server则是中心化注册管理的。Name Server最经典的就是DNS服务，也叫域名解析服务。即便IPv6和IPv9成为现实，只是简化了信标的路径。因为，在IPv4资源有限的情况下，我们是利用一些分层结构来构建信标，不仅涉及到安全的问题，也涉及到效率的问题。

基于密码学的基础信标是某个算法下的公钥。

在现有的通讯基础上，必须构建IP地址和公钥之间的映射能力。

我个人的主张是结合Name Server的机制，建立以Email地址为桥梁的MNS服务（Mail Name Server），MNS可以部分依赖于现有的DNS框架，同时，也内置了Mail寻址，以及公钥获得，和公钥与Mail地址之间关系的验证服务。

也就是MNS把Email地址、公钥、支撑算法三者结合起来，构成一个完整的信标服务，实现在现有网络基础设施上的密码学通讯能力。

由于，本质上是利用公钥寻址的，客观上支持了去中心化的能力。

这样做的好处是，利用Email网关，可以和现有最广泛使用的通讯系统交换信息。用户用新的端到端加密通讯系统，不会丢失客户，也不必重构社交关系。第二现有的IT系统也多用Email进行信息交换，这样就不需要重构现有的应用通知和应用协同系统。第三就是Email是每个用户都可以轻松具备的，甚至也是经常采用的通讯系统，不必重构世界通讯系统的基础框架。

相对于Telegram，微信，Whatsapp，Link等系统来说，这些系统某种意义上是用特有的通讯信标系统，各自独立的建构了一个个封闭的通讯寻址框架，并用这个方法捆绑用户。

利用Email寻址，则完全是分布式，去中心的，通用的通讯寻址框架，并保持了和现有通讯系统的连接能力。

还有一个关键的约束性特征在于，公钥是依赖某个算法域的，因此，Email域化的声明方式，和这个基础特性是匹配的。

中继服务

TCP/IP通讯的原理，是把一个通讯包进行分拆，形成固定长度的块，利用寻址服务和中继服务递送到接受端，进行合并后供接收方使用。前提假设是单一通路可以是不稳定的，因此，可以利用路由的原理，在一个网络结构上保障通路的稳定性，也就是利用多个通道结成的网络，构成一个冗余的信道，利用冗余和路径调整，维持数据传输的稳定性，这同时也诞生了广泛连接的能力，因此叫做互联网。

为什么要分块呢？这主要是因为要使用中继服务，中继服务如果不能在有限时间内处理要分发的数据，就会造成拥堵，中继利用帧这个概念，可以稳定的分时处理数据，这就要求数据不能过长。同时，由于线路会出现干扰，导致数据受损，验证一个大数据受损，并不断打回重发的代价太大。因此，分帧或分块的方法，可以只针对受损的部分数据进行修复，这就大大的提升了网络处理信息传递的效率。

由于在路由器等环节都需要数据验证，没有经过加密的数据，就很容易泄漏。

之前的TCP/IP通讯框架里，并没有考虑这个因素，因此，现在就设计了SSL层，这是个应用层。通过双方协商后，将数据加密再进行传输，这样，路由器，网关，防火墙等设备就无法劫持数据内容。这也是，Google和苹果主张使用https连接替代http连接的理由，现在你访问一个http链接，系统一般都会提示这是个不安全链接。

由于数据细胞技术和CDTP协议本身是加密的，依赖TCP/IP则不会出现泄漏和篡改的危险。因此，可以利用现有的网络交换数据。

消息队列与消息中继性存储服务

一个更加稳定可用的消息服务，还需要一个支持离线的中继服务，就是消息队列或中继性存储服务。

传统的Email就是这样的服务，消息被存储在一个中心系统中，当你上线时，可以将数据取回。这样的服务，一般都提供多端的读写状态同步服务，可以理解为状态机+消息存储。

传统的Email基本上采用明文方式存储，则就让数据中心成为了安全隐患集中的地方，而我们如果采用“数据器官”的原理，则可以杜绝安全隐患。为了让状态机可以正常工作，我在CDTP协议里为状态机设置了明文字段，这些不会泄漏用户的隐私，但可以让状态机优良的工作。

至于微信则也是明文系统，是安全和隐私等级不高的通讯中继服务。

也正因为是明文系统，Google的Gmail服务可以提供广告嵌入服务。

在密空里，密文是主权的表达式，因此，必须让数据具备加密处理并不为中心管理员掌控的能力。

密空里的加密管理，必须符合共识框架，才能正常工作，至于具体的一个域内空间，可以声明自己对权力的解读和内部达成一致的数据管理模型。

我们的Crypto-Mail服务，就提供了多种共识机制，应对不同的权利管理框架。

端支撑特性

这样的信息系统，不会把信息服务能力，和处理信息的能力完全交给服务端，服务端也不应该具备这样的能力。

传统的B/S框架下的通讯系统，服务端是数据处理的主要计算能力的提供者。

我们设计“秘邮”的时候，提供了一个强大的端，利用这个端来连接数据中继服务，在中继服务里都是密文的，只有在端内才转化为明文。

因此，也会牺牲一些用户体验，加大了用户设备计算的数量，以及更多依赖于客户端的存储能力。

但不这么做，就无法让数据安全得到保障，这是一个需要不断平衡的过程。

虽然，日常使用并不会带来显著的差异，但由于不断处理数据的加解密、验签、签名，性能提高则有个边际效应的约束。

但用户将来可以利用服务器上托管一个代理服务来实现，通过将公私钥授权给服务器，由服务器来执行日常业务，优化业务。

同时，由于中继消息服务具备多端同步能力，用户也可以委托多个个人计算机来共同处理自己的消息，建立更加强大的数据处理能力，以及自动应答能力。

这个机制，为多设备协作也提供了可能。

这是一个端到端对等框架的处理系统，中继服务提供了端协作的基本能力，物联网设备、工业互联网、人工智能都可以利用这个特性，通过端来实现数据共享和数据处理能力的共享。
