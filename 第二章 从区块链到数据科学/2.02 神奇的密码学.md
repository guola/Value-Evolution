# 2.2 神奇的密码学

**“道生一，一生二，二生三，三生万物”——《道德经》**

密码学核心是由三类算法组成，分别是对称加密，单向加密和非对称加密。

我们最容易理解的密码学算法是对称加密算法，就是一把钥匙开一把锁。

对称加密指加密和解密使用相同密钥的加密算法。有时又叫传统密码算法，就是加密密钥能够从解密密钥中推算出来，同时解密密钥也可以从加密密钥中推算出来。而在大多数的对称算法中，加密密钥和解密密钥是相同的，所以也称这种加密算法为秘密密钥算法或单密钥算法。它要求发送方和接收方在安全通信之前，商定一个密钥。对称算法的安全性依赖于密钥，泄漏密钥就意味着任何人都可以对他们发送或接收的消息解密，所以密钥的保密性对通信的安全性至关重要。

而非对称加密算法，则是由算法生成两把钥匙，一把是公钥（Public Key），一把是私钥（Private Key）。这两把钥匙有个有趣的特点，公钥加密的文件只能用私钥解密，反之用私钥加密的文件只能用公钥解密。

至于单向加密的哈希算法，又称为散列算法，则是可以将任何有些微差别的数据，变成一个具备固定长度的离散数值——哈希值，数值的长度决定可以涵盖数据的离散范围。而哈希后的数据是无法还原出原数据的，但可以利用哈希值验证原数据是否被篡改。简单的说，哈希算法可以给不同的数据建立唯一的可验证的标签，所谓“单向”是指其不可还原或无需还原的特征。

这三种加密算法构成了密码学的基础，细思极恐。这里似乎涵盖着宇宙的秘密，也许，基于交换的体系服从于密码学的特征，正如密码学和信息学是高度相关一样。或者，换种说法，如果数据权力的主体、归属、转移都可以利用密码学定义的话，那么权力本身，就不仅仅是人类社会创造出的概念，而是宇宙内置的原理，是其内在力量的体现。

信息学的本质和热力学类似，服从熵理论。熵用来描述无序和有序状态，信息的可用性，取决于有序性，如果是无序的，则是无用的。密码学就是把一个有序的数据，经过乱序处理，让普通的处理系统，无法处理这些信息。只有经过事先约定的信息系统，通过密钥来还原这些加密信息的序列，才能交付给其他信息系统继续处理。对于加密算法能否利用算法或固定方式破解，是加密系统能否长期稳定工作的基础。从信息学更宏观的角度看，可以用密钥不断变化来赢得时间窗，或利用密钥的变化，在更大的数据集合下，建立一个基于数据集合的内部乱序。

对于散列算法，有些结论认为可以利用彩虹表破解哈希算法。但这种情况只发生在口令的数据量明显低于哈希值的数据量的情况下，如果被加密的数据比哈希值大许多的话，则不可能反向破解。很简单的道理，就像压缩算法，即便数据信息量是可以在一定程度上无损压缩的，压缩也有比例的极限，用有限的小数据反推一个大几倍的离散数据的可能性是趋于零的。因此，不能认为彩虹法的存在是对SHA等算法本身的破解，这只是把技术用错了地方，利用哈希保护密码的方法本身是有问题的。

简化，数学化，抽象是我们构建智慧的方式，我们力图使用简单的规则，利用算力推演出宇宙，但发现，只是在某个尺度下具备效力。宇宙就像一个巨大的计算机，有些结果像日志一样存留下来。如果把宇宙演化看作一个计算过程，物质或星球，就像是阶段性的结算结果的累积，就像是数据存储。通过这些碎片化的结果，我们试图还原一个原来的样貌，也只能是粗糙的，不可还原性和热力学的墒理论一样不可突破。

这就像量子力学里面的薛定谔的猫，对于每次观察来说，可以随机并确定的出现两个结果，活猫和死猫。在概率上，出现死活的概率是可以统计的，但具体结果是不能确定的。这让人觉得，似乎观察者可以改变事实，但本质上，我们是把一个无法用逻辑描述的世界和一个我们自认为可以用因果逻辑描述的世界，建立一个稳定的映射关系而已，而这个映射关系又是完全概率化的，也是量子化的。量子像一个有刻度的尺子，在刻度之间留下了一个未知。那里没有连续的因果，只有尺度微小但难以逾越的认知黑洞，横亘在智力和事实之间。

这道理同样映射在数学世界里，数学和智力一样都是残缺之美。或者叫简约之美。忽略掉细节，抽象（Abstract），在表象和本质之间建立一个可以通过的桥，通向智慧的桥。如果宇宙就是一个智慧生命呢？也许自然的进化也是要建立这个桥，回到家，那个诞生如此纷繁世界的地方，如虚空，如涅槃寂静。

在每个科学里面，如果我们把时间纳入到一个维度或变量去思考，所谓多维宇宙，爱因斯坦的狭义相对论把时间和空间看作是互动的整体，中间以光速为桥，建立了一个纽带。而后期的广义相对论则直接认为时空一起构成一个空间，重力则是这个空间的一种结构，理论让背后的本质变得简单。时间像是秩序，又像是一个雕塑家，随意的改变着世界的面貌，平凡的对待它，你会发现背后的秘密，它不是孤立的存在，只是我们用认知分离了他们，观念中的时间和现代物理学的时间不是一个概念。

而非对称加密则是现代密码学重要的成果。有了这个成果，我们就有能力在一个纯粹的数学世界里建立信息的权利秩序。

在这个纯粹的数学世界里，每个信息接收者，可以用公钥来标记自己的位置，任何投递信息的过程，在数学里可以映射为，将信息用接收者的公钥进行加密的过程。在这里，我们熟知的空间概念，变成了密码学概念。

这种技术叫端到端加密（End to End Encryption），只有端到端加密，才不在意信道的安全与任何其他的方式，也就是说，和载体无关的信息传递。

本质上物理信道在空间结构的认知框架下都是广播型的。把信道限定在光缆或电缆中也无法改变其本质上的广播型特征。因为任何信息载体在物理空间中都服从波理论，即便是强制性锁定，也需要另外的信息系统确定这种锁定关系的可靠性。

但数学里的信息接收者则和位置无关的。也就是说，非对称加密则是和信道和位置以及特征无关的，当信息诞生的时候，就锁定了接受对象，这是无法被篡改和劫持的。既可以确定信源，也可以锁定目标。

信源可以用私钥加密一段只有双方确认的信息，来确认信源，这个技术叫数字签名，学术上叫零知识证明。（后续章节会详细论述）

这样我们就了解了一个重要的事实，利用非对称加密的算法，可以构造一个身份确认系统，也可以构造一个单向的数据传输系统。

私钥加密用于强身份鉴权（Strong Authorization），公钥加密则是端到端加密通讯存储（E2E）。

简单总结一下三种加密算法

1.  对称加密，密码越复杂越随机越难以破解。量子密码就是利用其随机性构造难以破解性，我们常用的密码键盘，就是把简单的数字映射为复杂的密码。
2.  哈希加密，可以为每条信息建立一个固定长度的数字指纹。主要用于验证数据的一致性，或数字防伪，反向破解难度很大，所以很多网站让你设置更加随机和复杂的密码。
3.  非对称加密，用于身份验证和确权。是数字签名技术的基础，以及端到端加密技术的基石。


